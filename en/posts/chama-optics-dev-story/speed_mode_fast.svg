<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 480">
  <defs>
    <marker id="arrow-b1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4A90D9"/>
    </marker>
    <marker id="arrow-g1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7CB342"/>
    </marker>
    <style>
      text { font-family: 'Inter', 'Helvetica Neue', 'Arial', sans-serif; }
      .title { font-size: 18px; font-weight: bold; fill: #1a1a1a; }
      .subtitle { font-size: 13px; fill: #666; }
      .label { font-size: 12px; fill: #333; }
      .label-sm { font-size: 11px; fill: #555; }
      .label-bold { font-size: 12px; fill: #333; font-weight: bold; }
      .step-num { font-size: 14px; font-weight: bold; fill: white; }
      .time { font-size: 14px; font-weight: bold; fill: #7CB342; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="860" height="480" rx="8" fill="#fafafa" stroke="#e0e0e0" stroke-width="1"/>

  <!-- Title -->
  <text x="430" y="32" text-anchor="middle" class="title">Speed Mode: Fast (max_depth = 1)</text>
  <text x="430" y="52" text-anchor="middle" class="subtitle">Panorama / unusual aspect ratios | Short-side sliding windows added</text>

  <!-- Original Image -->
  <rect x="40" y="75" width="360" height="240" rx="4" fill="#e8eef5" stroke="#b0bec5" stroke-width="1.5"/>

  <!-- Step 1: Whole image resize (blue dashed) -->
  <rect x="40" y="75" width="360" height="240" rx="4" fill="#4A90D9" fill-opacity="0.08" stroke="#4A90D9" stroke-width="1.5" stroke-dasharray="8,4"/>
  <circle cx="55" cy="90" r="12" fill="#4A90D9"/>
  <text x="55" y="95" text-anchor="middle" class="step-num">1</text>

  <!-- Step 2: Short-side sliding windows (green) -->
  <!-- min(6000,4000) = 4000, so 4000x4000 windows. In SVG scale: 240x240 -->
  <!-- Window 1 -->
  <rect x="43" y="78" width="236" height="234" rx="3" fill="#7CB342" fill-opacity="0.12" stroke="#7CB342" stroke-width="2"/>
  <!-- Window 2 (with overlap) -->
  <rect x="160" y="78" width="237" height="234" rx="3" fill="#7CB342" fill-opacity="0.12" stroke="#7CB342" stroke-width="2" stroke-dasharray="6,3"/>

  <circle cx="55" cy="120" r="12" fill="#7CB342"/>
  <text x="55" y="125" text-anchor="middle" class="step-num">2</text>

  <!-- Dimension labels on image -->
  <text x="220" y="205" text-anchor="middle" class="label" fill="#78909c">6000 x 4000</text>

  <!-- Window size labels -->
  <text x="160" y="335" text-anchor="middle" class="label-sm" fill="#7CB342">4000x4000 windows (short side)</text>
  <text x="160" y="350" text-anchor="middle" class="label-sm" fill="#7CB342">Slide with 10% overlap</text>

  <!-- Pipeline: Step 1 -->
  <line x1="420" y1="140" x2="485" y2="140" stroke="#4A90D9" stroke-width="2" marker-end="url(#arrow-b1)"/>
  <text x="452" y="132" text-anchor="middle" class="label-sm" fill="#4A90D9">resize</text>
  <rect x="495" y="110" width="70" height="60" rx="3" fill="#4A90D9" fill-opacity="0.15" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="530" y="145" text-anchor="middle" class="label-sm" fill="#4A90D9">640x640</text>
  <line x1="575" y1="140" x2="625" y2="140" stroke="#4A90D9" stroke-width="1.5" marker-end="url(#arrow-b1)"/>

  <!-- Pipeline: Step 2 -->
  <line x1="420" y1="230" x2="485" y2="230" stroke="#7CB342" stroke-width="2" marker-end="url(#arrow-g1)"/>
  <text x="452" y="222" text-anchor="middle" class="label-sm" fill="#7CB342">resize</text>
  <rect x="495" y="200" width="70" height="60" rx="3" fill="#7CB342" fill-opacity="0.15" stroke="#7CB342" stroke-width="1.5"/>
  <text x="530" y="225" text-anchor="middle" class="label-sm" fill="#7CB342">640x640</text>
  <text x="530" y="240" text-anchor="middle" class="label-sm" fill="#7CB342">x N</text>
  <line x1="575" y1="230" x2="625" y2="230" stroke="#7CB342" stroke-width="1.5" marker-end="url(#arrow-g1)"/>

  <!-- ONNX box (shared) -->
  <rect x="635" y="120" width="180" height="150" rx="6" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1.5"/>
  <text x="725" y="155" text-anchor="middle" class="label-bold">ONNX Inference</text>
  <text x="725" y="175" text-anchor="middle" class="label-sm">InsightFace SCRFD</text>
  <line x1="680" y1="190" x2="770" y2="190" stroke="#e0e0e0" stroke-width="1"/>
  <text x="725" y="215" text-anchor="middle" class="label-sm">NMS (IoU 0.4)</text>
  <text x="725" y="235" text-anchor="middle" class="label-sm">Remove duplicates</text>
  <text x="725" y="260" text-anchor="middle" class="label-sm" fill="#7CB342">â†’ Face coordinates output</text>

  <!-- Result summary box -->
  <rect x="40" y="400" width="780" height="60" rx="6" fill="#F1F8E9" stroke="#7CB342" stroke-width="1"/>
  <text x="60" y="425" class="label-bold" fill="#7CB342">Fast</text>
  <text x="100" y="425" class="label">: Whole resize + short-side (min(W,H)) sliding windows. Prevents missed faces in panorama/unusual aspect ratios.</text>
  <text x="60" y="445" class="time">Avg ~0.6s</text>
  <text x="175" y="445" class="label-sm">| No multi-scale depth search | Depth loop skipped</text>

  <!-- Legend -->
  <rect x="40" y="370" width="16" height="12" rx="2" fill="#4A90D9" fill-opacity="0.15" stroke="#4A90D9" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="62" y="381" class="label-sm">Whole resize</text>
  <rect x="180" y="370" width="16" height="12" rx="2" fill="#7CB342" fill-opacity="0.15" stroke="#7CB342" stroke-width="1.5"/>
  <text x="202" y="381" class="label-sm">Short-side sliding windows</text>
</svg>
