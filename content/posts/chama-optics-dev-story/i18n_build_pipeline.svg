<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 920 620">
  <defs>
    <marker id="ar-i18n" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#546E7A"/>
    </marker>
    <marker id="ar-ios" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1565C0"/>
    </marker>
    <marker id="ar-dsk" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#7B1FA2"/>
    </marker>
    <marker id="ar-and" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#2E7D32"/>
    </marker>
    <style>
      text { font-family: 'Inter', 'Helvetica Neue', 'Arial', sans-serif; }
      .title { font-size: 17px; font-weight: bold; fill: #1a1a1a; }
      .subtitle { font-size: 12px; fill: #666; }
      .label { font-size: 12px; fill: #333; }
      .label-sm { font-size: 10.5px; fill: #555; }
      .label-xs { font-size: 9.5px; fill: #777; }
      .label-bold { font-size: 12px; fill: #333; font-weight: bold; }
      .code { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 10px; fill: #37474F; }
      .code-sm { font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace; font-size: 9px; fill: #546E7A; }
      .step-num { font-size: 13px; font-weight: bold; fill: white; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="920" height="620" rx="8" fill="#fafafa" stroke="#e0e0e0" stroke-width="1"/>

  <!-- Title -->
  <text x="460" y="28" text-anchor="middle" class="title">i18n Build Pipeline: One YAML, Three Platforms</text>
  <text x="460" y="46" text-anchor="middle" class="subtitle">23 YAML files in rust-core/locales/ → auto-generate .strings (iOS), strings.xml (Android), compile-time embed (Desktop)</text>

  <!-- ═══ YAML Source ═══ -->
  <rect x="25" y="62" width="870" height="130" rx="6" fill="#FFEBEE" stroke="#ce422b" stroke-width="1.5"/>
  <circle cx="45" cy="78" r="10" fill="#ce422b"/>
  <text x="45" y="82" text-anchor="middle" class="step-num">1</text>
  <text x="65" y="82" class="label-bold" fill="#ce422b">One Source, All Platforms — rust-core/locales/*.yml</text>
  <text x="660" y="82" class="label-xs">23 files · 4 locales (en, ko, ja, id) · ~3,900 lines</text>

  <!-- YAML file sample boxes -->
  <rect x="37" y="95" width="195" height="86" rx="4" fill="white" stroke="#FFCDD2" stroke-width="1"/>
  <text x="47" y="112" class="code" fill="#ce422b">common.yml</text>
  <line x1="37" y1="117" x2="232" y2="117" stroke="#FFCDD2" stroke-width="1"/>
  <text x="47" y="132" class="code-sm">save:</text>
  <text x="47" y="145" class="code-sm">  en: "Save"</text>
  <text x="47" y="158" class="code-sm">  ko: "저장"</text>
  <text x="47" y="171" class="code-sm">  ja: "保存"</text>

  <rect x="245" y="95" width="195" height="86" rx="4" fill="white" stroke="#FFCDD2" stroke-width="1"/>
  <text x="255" y="112" class="code" fill="#ce422b">gallery.yml</text>
  <line x1="245" y1="117" x2="440" y2="117" stroke="#FFCDD2" stroke-width="1"/>
  <text x="255" y="132" class="code-sm">gallery:</text>
  <text x="255" y="145" class="code-sm">  empty_state_title:</text>
  <text x="255" y="158" class="code-sm">    en: "No Images Yet"</text>
  <text x="255" y="171" class="code-sm">    ko: "이미지 없음"</text>

  <rect x="453" y="95" width="195" height="86" rx="4" fill="white" stroke="#FFCDD2" stroke-width="1"/>
  <text x="463" y="112" class="code" fill="#ce422b">theme.yml</text>
  <line x1="453" y1="117" x2="648" y2="117" stroke="#FFCDD2" stroke-width="1"/>
  <text x="463" y="132" class="code-sm">theme:</text>
  <text x="463" y="145" class="code-sm">  border:</text>
  <text x="463" y="158" class="code-sm">    en: "Border"</text>
  <text x="463" y="171" class="code-sm">    ko: "테두리"</text>

  <rect x="661" y="95" width="222" height="86" rx="4" fill="white" stroke="#FFCDD2" stroke-width="1"/>
  <text x="671" y="112" class="label-sm" fill="#999">+ 20 more YAML files</text>
  <line x1="661" y1="117" x2="883" y2="117" stroke="#FFCDD2" stroke-width="1"/>
  <text x="671" y="132" class="label-xs">language.yml · face_detection.yml</text>
  <text x="671" y="145" class="label-xs">sticker.yml · watermark.yml</text>
  <text x="671" y="158" class="label-xs">export.yml · color.yml · tabs.yml</text>
  <text x="671" y="171" class="label-xs">cheki.yml · fonts.yml · settings.yml ...</text>

  <!-- ═══ Arrows from source to 3 pipelines ═══ -->
  <line x1="180" y1="196" x2="155" y2="228" stroke="#1565C0" stroke-width="2" marker-end="url(#ar-ios)"/>
  <line x1="460" y1="196" x2="460" y2="228" stroke="#7B1FA2" stroke-width="2" marker-end="url(#ar-dsk)"/>
  <line x1="740" y1="196" x2="765" y2="228" stroke="#2E7D32" stroke-width="2" marker-end="url(#ar-and)"/>

  <!-- ═══ iOS Pipeline ═══ -->
  <rect x="25" y="235" width="275" height="175" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5"/>
  <circle cx="45" cy="251" r="10" fill="#1565C0"/>
  <text x="45" y="255" text-anchor="middle" class="step-num">2</text>
  <text x="65" y="255" class="label-bold" fill="#1565C0">iOS — generate_ios_strings.sh</text>

  <rect x="37" y="268" width="251" height="130" rx="4" fill="white" stroke="#BBDEFB" stroke-width="1"/>
  <text x="47" y="285" class="label-sm" fill="#1565C0" font-weight="bold">Python3 + PyYAML</text>
  <text x="47" y="301" class="code-sm">yaml.safe_load() → recursive extract</text>
  <text x="47" y="315" class="code-sm">Key: dot notation preserved</text>
  <text x="47" y="329" class="code-sm">"gallery.empty_state_title" = "...";</text>
  <line x1="47" y1="337" x2="278" y2="337" stroke="#BBDEFB" stroke-width="1"/>
  <text x="47" y="352" class="label-xs" fill="#1565C0">_ios suffix → iOS-specific override</text>
  <text x="47" y="366" class="label-xs" fill="#1565C0">Auto-called from build_ios.sh</text>
  <text x="47" y="380" class="label-xs">Output: {locale}.lproj/Localizable.strings × 4</text>

  <!-- ═══ Desktop Pipeline ═══ -->
  <rect x="322" y="235" width="275" height="175" rx="6" fill="#EDE7F6" stroke="#7B1FA2" stroke-width="1.5"/>
  <circle cx="342" cy="251" r="10" fill="#7B1FA2"/>
  <text x="342" y="255" text-anchor="middle" class="step-num">2</text>
  <text x="362" y="255" class="label-bold" fill="#7B1FA2">Desktop — rust_i18n crate</text>

  <rect x="334" y="268" width="251" height="130" rx="4" fill="white" stroke="#CE93D8" stroke-width="1"/>
  <text x="344" y="285" class="label-sm" fill="#7B1FA2" font-weight="bold">Direct compile-time embedding</text>
  <text x="344" y="301" class="code-sm">rust_i18n::i18n!("locales");</text>
  <text x="344" y="315" class="code-sm">rust_i18n::set_locale("ko");</text>
  <text x="344" y="329" class="code-sm">t!("gallery.empty_state_title")</text>
  <line x1="344" y1="337" x2="575" y2="337" stroke="#CE93D8" stroke-width="1"/>
  <text x="344" y="352" class="label-xs" fill="#7B1FA2">No conversion needed — reads YAML directly</text>
  <text x="344" y="366" class="label-xs" fill="#7B1FA2">cargo:rerun-if-changed=locales</text>
  <text x="344" y="380" class="label-xs">Output: embedded in binary at compile time</text>

  <!-- ═══ Android Pipeline ═══ -->
  <rect x="619" y="235" width="276" height="175" rx="6" fill="#E8F5E9" stroke="#2E7D32" stroke-width="1.5"/>
  <circle cx="639" cy="251" r="10" fill="#2E7D32"/>
  <text x="639" y="255" text-anchor="middle" class="step-num">2</text>
  <text x="659" y="255" class="label-bold" fill="#2E7D32">Android — generate_android_strings.sh</text>

  <rect x="631" y="268" width="252" height="130" rx="4" fill="white" stroke="#C8E6C9" stroke-width="1"/>
  <text x="641" y="285" class="label-sm" fill="#2E7D32" font-weight="bold">Python3 + PyYAML + xml.etree</text>
  <text x="641" y="301" class="code-sm">yml_key.replace('.', '_')</text>
  <text x="641" y="315" class="code-sm">&lt;string name="gallery_empty_..."&gt;</text>
  <text x="641" y="329" class="code-sm">Locale map: id → values-in</text>
  <line x1="641" y1="337" x2="873" y2="337" stroke="#C8E6C9" stroke-width="1"/>
  <text x="641" y="352" class="label-xs" fill="#2E7D32">Diff-based: only adds missing keys</text>
  <text x="641" y="366" class="label-xs" fill="#2E7D32">Preserves manually-added entries</text>
  <text x="641" y="380" class="label-xs">Output: values{-locale}/strings.xml × 4</text>

  <!-- ═══ Arrows to output ═══ -->
  <line x1="162" y1="414" x2="162" y2="436" stroke="#1565C0" stroke-width="2" marker-end="url(#ar-ios)"/>
  <line x1="460" y1="414" x2="460" y2="436" stroke="#7B1FA2" stroke-width="2" marker-end="url(#ar-dsk)"/>
  <line x1="757" y1="414" x2="757" y2="436" stroke="#2E7D32" stroke-width="2" marker-end="url(#ar-and)"/>

  <!-- ═══ Comparison Table ═══ -->
  <rect x="25" y="445" width="870" height="165" rx="6" fill="white" stroke="#e0e0e0" stroke-width="1"/>

  <!-- Table header -->
  <rect x="25" y="445" width="870" height="24" rx="6" fill="#ECEFF1"/>
  <rect x="25" y="457" width="870" height="12" fill="#ECEFF1"/>
  <text x="55" y="462" class="label-bold" fill="#546E7A">Aspect</text>
  <text x="218" y="462" class="label-bold" fill="#1565C0">iOS (Swift)</text>
  <text x="460" y="462" text-anchor="middle" class="label-bold" fill="#7B1FA2">Desktop (Rust/egui)</text>
  <text x="720" y="462" class="label-bold" fill="#2E7D32">Android (Kotlin)</text>
  <line x1="35" y1="469" x2="885" y2="469" stroke="#CFD8DC" stroke-width="1"/>

  <!-- Row: Output Format -->
  <rect x="35" y="472" width="850" height="22" rx="0" fill="#E3F2FD" fill-opacity="0.2"/>
  <text x="55" y="487" class="label-sm">Output format</text>
  <text x="218" y="487" class="code-sm">.strings (Localizable.strings)</text>
  <text x="405" y="487" class="code-sm">Compiled into binary (no file)</text>
  <text x="720" y="487" class="code-sm">.xml (strings.xml)</text>

  <!-- Row: Key separator -->
  <text x="55" y="509" class="label-sm">Key separator</text>
  <text x="218" y="509" class="code-sm">. (dot) preserved</text>
  <text x="405" y="509" class="code-sm">. (dot) native</text>
  <text x="720" y="509" class="code-sm">_ (underscore) converted</text>

  <!-- Row: Generation trigger -->
  <rect x="35" y="516" width="850" height="22" rx="0" fill="#E3F2FD" fill-opacity="0.2"/>
  <text x="55" y="531" class="label-sm">Build trigger</text>
  <text x="218" y="531" class="code-sm">build_ios.sh (automatic)</text>
  <text x="405" y="531" class="code-sm">cargo build (rerun-if-changed)</text>
  <text x="720" y="531" class="code-sm">Manual / CI invocation</text>

  <!-- Row: Sync strategy -->
  <text x="55" y="553" class="label-sm">Sync strategy</text>
  <text x="218" y="553" class="code-sm">Full overwrite each build</text>
  <text x="405" y="553" class="code-sm">N/A (direct YAML read)</text>
  <text x="720" y="553" class="code-sm">Diff — add missing only</text>

  <!-- Row: Platform override -->
  <rect x="35" y="560" width="850" height="22" rx="0" fill="#E3F2FD" fill-opacity="0.2"/>
  <text x="55" y="575" class="label-sm">Platform override</text>
  <text x="218" y="575" class="code-sm">_ios suffix supported</text>
  <text x="405" y="575" class="code-sm">—</text>
  <text x="720" y="575" class="code-sm">—</text>

  <!-- Row: Indonesian locale -->
  <text x="55" y="597" class="label-sm">Indonesian code</text>
  <text x="218" y="597" class="code-sm">id.lproj/</text>
  <text x="405" y="597" class="code-sm">id</text>
  <text x="720" y="597" class="code-sm">values-in/ (Android convention)</text>
</svg>
